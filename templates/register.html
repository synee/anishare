{% extends 'layout/single_form.html' %}
{% block title %}注册{% endblock %}
{% block form %}
    <form method="post">
        <div class="form-group">
            <p id="error-message" style="color: red">
                {% if error %}
                    {{ error }}
                {% endif %}
            </p>
        </div>
        <div class="form-group">
            <input class='form-control' type="text" name="email" placeholder="邮箱">
        </div>
        <div class="form-group">
            <input class='form-control' type="password" name="password" id="passwordInput" placeholder="密码">
        </div>
        <div class="form-group">
            <input class='form-control' type="password" name="repassword" id="repasswordInput" placeholder="确认密码">
        </div>
        <div class="form-group">
            <button class="btn btn-primary btn-block" type="submit" id="submitInput">注册</button>
        </div>
        <div class="form-group text-right">
            <a href="/login">已有账号,去登录</a>
        </div>
    </form>
    <script>
        $(function () {
            $("#passwordInput,#repasswordInput").keyup(function (e) {
                if ($("#passwordInput").val() != $("#repasswordInput").val()) {
                    $("#error-message").text("密码不一致");
                    $("#submitInput").attr({'disabled': 'disabled'});
                } else {
                    $("#error-message").text("");
                    $("#submitInput").removeAttr("disabled");
                }
            });
        });
    </script>
{% endblock %}